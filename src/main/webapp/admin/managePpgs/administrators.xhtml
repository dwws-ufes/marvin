<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:adm="http://github.com/adminfaces"
    template="/WEB-INF/templates/template.xhtml">

   <ui:define name="title">
   <h:outputText value="#{msgsAdmin['managePpgs.title.administrators']}" />
</ui:define>

<ui:define name="description">
	<h:outputText value="#{msgsAdmin['managePpgs.title.administrators.description']}" />
</ui:define>

<ui:define name="body">
		<!-- The breadcrumb. -->
		<adm:breadcrumb title="#{msgsAdmin['manageAcademics.title']}" link="index.xhtml" />
	
		<!-- The form to be filled with information on the academic. -->
		<ui:decorate template="/WEB-INF/templates/form.xhtml">
			<ui:param name="formName" value="form" /> 
			<ui:param name="formLabel" value="#{msgsAdmin['managePpgs.title.administrators']}" />
			<p:focus />
			<!-- Field: academic. -->
			<ui:decorate template="/WEB-INF/templates/formfield.xhtml">
				<ui:param name="fieldName" value="academic" />
				<ui:param name="label" value="#{msgsAdmin['managePpgs.field.academics']}" />
				<p:autoComplete id="academic" value="#{managePpgsController.selectedAcademic}" completeMethod="#{managePpgsController.completeAcademic}" var="academic" itemLabel="#{academic.name}" itemValue="#{academic}" forceSelection="true" >
					<p:column>
						<h:outputText value="#{academic.name}" />
					</p:column>
					<p:column>
						<h:outputText value="#{academic.email}" />
					</p:column>
				</p:autoComplete>			
			</ui:decorate>
			<!-- Field: Role. -->
			<ui:decorate template="/WEB-INF/templates/formfield.xhtml">
				<ui:param name="fieldName" value="role" />
				<ui:param name="label" value="#{msgsAdmin['managePpgs.field.email']}" />
				<p:selectOneMenu id="role" value="#managePpgsController.selectedRole}"> 
				   <f:selectItems var="roleName" value="#{managePpgsController.roleList}" itemValue="#{roleName}" />
				   <p:ajax event="itemSelect" update="role"/>
				</p:selectOneMenu> 
			</ui:decorate>
			<!-- Buttons shown below the form. -->
			<h:panelGroup rendered="#{! manageAcademicsController.readOnly}">
				<ui:decorate template="/WEB-INF/templates/formbuttonpanel.xhtml">
					<p:commandButton id="cancelButton" action="#{managePpgsController.list}" value="#{msgs['jbutler.crud.button.cancel']}" immediate="true" icon="fa fa-fw fa-close" />
					<p:commandButton id="saveButton" action="#{managePpgsController.save}" value="#{msgs['jbutler.crud.button.save']}" update=":form :messages :info-messages" icon="fa fa-fw fa-save" />
					<p:defaultCommand target="saveButton" />
				</ui:decorate>
			</h:panelGroup>
			<h:panelGroup rendered="#{managePpgsController.readOnly}">
				<ui:decorate template="/WEB-INF/templates/formbuttonpanel.xhtml">
					<p:commandButton id="backButton" action="#{manageAcademicsController.list}" value="#{msgs['jbutler.crud.button.back']}" immediate="true" icon="fa fa-fw fa-arrow-circle-left" />
				</ui:decorate>
			</h:panelGroup>
		</ui:decorate>		
	</ui:define>
</ui:composition>